<h1>Add Key Result</h1>
<div class="panel panel-default">
  <div class="panel-heading">
  {{#link-to 'quarters' session.organisation}}<span class="glyphicon glyphicon-home"></span> All Quarters{{/link-to}} > {{#link-to 'objectives' session.organisation quarter.id}}{{quarter.year}} Q{{quarter.quarter}}{{/link-to}} > New Key Result
  </div>
  <div class="panel-body">
    <form class="form-horizontal" role="form">
      <div class="form-group">
        <label for="inputCompanyGoal" class="col-sm-2 control-label">Company Goal</label>
        <div class="col-sm-9">
        {{view "select"
          content=controllers.application.companyGoal
          selection=companyGoal
          prompt="Please select a company goal ..."
          classNames="form-control"}}
        </div>
        {{#if errors.companyGoal}} <div class="col-sm-1 invalid" data-toggle="tooltip" {{bind-attr title="companyGoalErrors"}}></div> {{/if}}
      </div>
      <div class="form-group">
        <label for="inputObjective" class="col-sm-2 control-label">Objective</label>
        <div class="col-sm-9">
        {{view "select"
          contentBinding="controller.objectives"
          optionValuePath="content.id"
          optionLabelPath="content.name"
          selectionBinding="objective.content"
          prompt="Please select an objective ..."
          classNames="form-control"}}
        </div>
        {{#unless objective.id}} <div class="col-sm-1 invalid"></div>{{/unless}}
      </div>
      <div class="form-group">
        <label for="inputQuarter" class="col-sm-2 control-label">Quarter</label>
        <div class="col-sm-9">
        {{view "select"
          contentBinding="controller.quarters"
          optionValuePath="content.id"
          optionLabelPath="content.name"
          selectionBinding="quarter.content"
          prompt="Please select a quarter ..."
          classNames="form-control"}}
        </div>
        {{#unless quarter.id}} <div class="col-sm-1 invalid"></div>{{/unless}}
      </div>
      <div class="form-group">
        <label for="inputKeyResult" class="col-sm-2 control-label">Key Result</label>
        <div class="col-sm-9">
          {{focus-input class="form-control" id="inputKeyResult" placeholder="Enter Key Result name" value=name}}
        </div>
        {{#if errors.name}} <div class="col-sm-1 invalid" data-toggle="tooltip" {{bind-attr title="nameErrors"}}></div> {{/if}}
      </div>
      <div class="form-group">
        <label for="inputJiraKR" class="col-sm-2 control-label">JIRA KR</label>
        <div class="col-sm-9">
          {{input class="form-control" id="inputJiraKR" placeholder="Enter JIRA Key Result" value=jiraKR}}
        </div>
      </div>
      <div class="form-group">
        <label for="inputDocLink" class="col-sm-2 control-label">Link to documentation</label>
        <div class="col-sm-9">
          {{input class="form-control" id="inputDocLink" placeholder="Enter the link for any documentation for this KR - in the wiki, JIRA, Google Docs, the web..." value=docLink}}
        </div>
      </div>
      <div class="form-group">
        <label for="inputRisks" class="col-sm-2 control-label">Risks</label>
        <div class="col-sm-9">
          {{textarea class="form-control" rows="3" id="inputRisks" placeholder="List the risks associated with this Key Result" value=risks}}
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-2 control-label">Committed for this Quarter?</label>
        <div class="col-sm-4">
          {{input type="checkbox" name="committed" checked=committed}}
        </div>
      </div>
      {{#if isValid}} 
      <button type="submit" class="btn btn-primary" {{action "saveKeyResult"}}>Save Key Result</button>
      {{else}}
      <button type="submit" class="btn btn-primary disabled">Save Key Result</button>
      {{/if}}
      <button type="button" class="btn" {{action "discardKeyResult"}}>Discard Changes</button>
    </form>
  </div>
</div>
{{outlet}}
